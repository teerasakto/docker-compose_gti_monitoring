{"version":3,"sources":["../src/module.js"],"names":["MetricsPanelCtrl","$","_","moment","d3","MultistatPanelCtrl","$scope","$injector","alertSrv","panelDefaults","panel","elem","ctrl","defaults","events","on","onRender","bind","onDataReceived","onDataError","onInitEditMode","className","id","svg","select","append","err","set","data","message","seriesList","render","metricNames","sortDirections","aggregations","fontSizes","valuePositions","addEditorTab","cols","length","html","rows","type","i","columns","text","cols0","concat","dateTimeCol","$title","closest","find","$maxDate","children","last","ShowDate","maxDate","dd","add","TZOffsetHours","DateFormat","toUpperCase","fromNow","show","format","hide","labelCol","valueCol","sortCol","groupCol","DateTimeColName","LabelColName","ValueColName","SortColName","GroupColName","LabelNameFilter","regex","RegExp","matchingRows","label","match","push","Aggregate","oo","nest","key","d","rollup","entries","forEach","x","value","Object","values","assign","mean","Array","from","max","min","height","$container","h","w","width","SortDirection","ascending","sort","y","comp","buildDateHtml","horizontal","Horizontal","labelMargin","isNumeric","LabelMargin","lowSideMargin","LowSideMargin","highSideMargin","HighSideMargin","selectAll","interrupt","barPadding","BarPadding","baseLineValue","BaseLineValue","minLineValue","MinLineValue","maxLineValue","MaxLineValue","highBarColor","HighBarColor","lowBarColor","LowBarColor","highLimitValue","HighLimitValue","HighLimitBarColor","HighLimitBarFlashColor","HighLimitBarFlashTimeout","recolorHighLimitBar","RecolorHighLimitBar","lowLimitValue","LowLimitValue","LowLimitBarColor","LowLimitBarFlashColor","LowLimitBarFlashTimeout","recolorLowLimitBar","RecolorLowLimitBar","flashHighLimitBar","FlashHighLimitBar","flashLowLimitBar","FlashLowLimitBar","showTooltips","ShowTooltips","TooltipDateFormat","ValueDecimals","OddRowColor","EvenRowColor","GroupSortString","GroupCols","GroupNameFilter","ScaleFactor","Number","LabelColor","OutOfRangeLabelColor","ValuePosition","minValue","maxValue","attr","style","tooltipShow","c","tooltipDiv","transition","duration","cc","toFixed","event","pageX","pageY","tooltipHide","scaleAndClipValue","val","plotGroupHorizontal","numRows","groupName","groupNameOffset","left","hh","dh","ShowGroupLabels","GroupLabelFontSize","GroupLabelColor","labels","map","Math","random","toString","substr","labelScale","scaleBand","domain","rangeRound","padding","stripedata","range","stripeScale","oddeven","enter","bandwidth","gg","ShowValues","maxValueWidth","ValueFontSize","ValueColor","each","thisWidth","getComputedTextLength","ShowLabels","maxLabelWidth","labelAngle","LableAngle","LabelFontSize","bbox","getBBox","s","sin","PI","cos","b","abs","a","valueScale","scaleLinear","nice","vLine","color","ShowBaseLine","BaseLineColor","ShowMaxLine","MaxLineColor","ShowMinLine","MinLineColor","ShowHighLimitLine","HighLimitLineColor","ShowLowLimitLine","LowLimitLineColor","classed","g","ggHighSide","call","axisTop","HighAxisColor","ggLowSide","axisBottom","LowAxisColor","replace","groupedRows","regexGroupNameFilter","matchingGroups","aPos","search","bPos","localeCompare","gap","gcols","dw","pointsPerRow","rr","floor","u","totalPoints","rowOverheadHeight","rowHeight","ceil","nn","ii","plotGroupVertical","maxValueHeight","thisHeight","maxLabelHeight","hLine","axisLeft","tickSizeInner","tickSizeOuter","ticks","axisRight","regexGroupRows","pointsPerCol","colOverheadWidth","colWidth","ww","pulseHigh","highFlashRects","_groups","highRepeat","active","pulseLow","lowFlashRects","lowRepeat","renderingCompleted","refresh","scope","attrs","templateUrl"],"mappings":"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","file":"module.js","sourcesContent":["/*jshint esversion: 6 */\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport $ from 'jquery';\r\nimport 'jquery.flot';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport \"./css/multistat-panel.css!\";\r\nimport d3 from './external/d3';\r\n\r\n\r\n\r\n\r\nclass MultistatPanelCtrl extends MetricsPanelCtrl {\r\n\r\n    /** @ngInject */\r\n    constructor($scope, $injector, alertSrv) {\r\n        super($scope, $injector);\r\n\r\n        this.alertSrv = alertSrv;\r\n\r\n        var panelDefaults = {\r\n\t\t\t\"BarPadding\": 10,\r\n\t\t\t\"BaseLineColor\": \"red\",\r\n\t\t\t\"BaseLineValue\": 0,\r\n\t\t\t\"DateTimeColName\": \"date\",\r\n\t\t\t\"DateFormat\": \"YYYY-MM-DD HH:mm:ss\",\r\n\t\t\t\"TooltipDateFormat\": \"YYYY-MM-DD HH:mm:ss\",\r\n\t\t\t\"FlashHighLimitBar\": false,\r\n\t\t\t\"FlashLowLimitBar\": false,\r\n\t\t\t\"HighAxisColor\": \"white\",\r\n\t\t\t\"HighBarColor\": \"rgb(120, 128, 0)\",\r\n\t\t\t\"HighLimitBarColor\": \"red\",\r\n\t\t\t\"HighLimitBarFlashColor\": \"orange\",\r\n\t\t\t\"HighLimitBarFlashTimeout\": 1000,\r\n\t\t\t\"HighLimitLineColor\": \"red\",\r\n\t\t\t\"HighLimitValue\": 0.33,\r\n\t\t\t\"HighSideMargin\": 20,\r\n\t\t\t\"Horizontal\": false,\r\n\t\t\t\"LabelColName\": \"sensor\",\r\n\t\t\t\"LabelNameFilter\": \"\",\r\n\t\t\t\"LabelColor\": \"white\",\r\n\t\t\t\"OutOfRangeLabelColor\": \"red\",\r\n\t\t\t\"GroupLabelColor\": \"white\",\r\n\t\t\t\"LabelFontSize\": \"100%\",\r\n\t\t\t\"GroupLabelFontSize\": \"200%\",\r\n\t\t\t\"LabelMargin\": null,\r\n\t\t\t\"LowAxisColor\": \"white\",\r\n\t\t\t\"LowBarColor\": \"teal\",\r\n\t\t\t\"LowLimitBarColor\": \"red\",\r\n\t\t\t\"LowLimitBarFlashColor\": \"orange\",\r\n\t\t\t\"LowLimitBarFlashTimeout\": 200,\r\n\t\t\t\"LowLimitLineColor\": \"red\",\r\n\t\t\t\"LowLimitValue\": null,\r\n\t\t\t\"LowSideMargin\": 20,\r\n\t\t\t\"MaxLineColor\": \"rgb(74, 232, 12)\",\r\n\t\t\t\"MaxLineValue\": 1,\r\n\t\t\t\"MinLineValue\": 0,\r\n\t\t\t\"RecolorHighLimitBar\": true,\r\n\t\t\t\"RecolorLowLimitBar\": false,\r\n\t\t\t\"ShowBaseLine\": true,\r\n\t\t\t\"ShowDate\": false,\r\n\t\t\t\"Aggregate\": \"last\",\r\n\t\t\t\"ShowHighLimitLine\": true,\r\n\t\t\t\"ShowLabels\": true,\r\n\t\t\t\"ShowGroupLabels\": true,\r\n\t\t\t\"ShowLeftAxis\": true,\r\n\t\t\t\"ShowLowLimitLine\": false,\r\n\t\t\t\"ShowMaxLine\": false,\r\n\t\t\t\"ShowMinLine\": true,\r\n\t\t\t\"ShowRightAxis\": true,\r\n\t\t\t\"ShowTooltips\": true,\r\n\t\t\t\"ShowValues\": true,\r\n\t\t\t\"SortColName\": \"value\",\r\n\t\t\t\"SortDirection\": \"ascending\",\r\n\t\t\t\"TZOffsetHours\": 0,\r\n\t\t\t\"ValueColName\": \"value\",\r\n\t\t\t\"ValueDecimals\": 2,\r\n\t\t\t\"ValueColor\": \"white\",\r\n\t\t\t\"ValueFontSize\": \"100%\",\r\n\t\t\t\"OddRowColor\": \"rgba(33, 33, 34, 0.92)\",\r\n\t\t\t\"EvenRowColor\": \"rgba(61, 61, 64, 0.78)\",\r\n\t\t\t\"GroupSortString\": \"\",\r\n\t\t\t\"GroupCols\": 0,\r\n\t\t\t\"GroupNameFilter\": \"\",\r\n\t\t\t\"ScaleFactor\": 1.0,\r\n\t\t\t\"ValuePosition\": \"top\",\r\n\t\t\t\"LableAngle\": 0\r\n\t\t\t};\r\n\r\n        var panel = {};\r\n        var elem = {};\r\n        var ctrl = {};\r\n\t\t\r\n        _.defaults(this.panel, panelDefaults);\r\n\r\n        this.events.on('render', this.onRender.bind(this));\r\n        this.events.on('data-received', this.onDataReceived.bind(this));\r\n        this.events.on('data-error', this.onDataError.bind(this));\r\n        this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\r\n\t\tthis.className = 'michaeldmoore-multistat-panel-' + this.panel.id;\r\n\t\tthis.svg = d3.select('.' + this.className).append('svg');\t\r\n    }\r\n\r\n    onDataError(err) {\r\n        this.alertSrv.set('Multistat Data Error', err.data.message == 'Found no column named time' ? 'Time-Series queries not yet supported' : err.data.message, 'error', 5000);\r\n        this.seriesList = [];\r\n\t\tthis.data = [];\r\n        this.render();\r\n    }\r\n\r\n    onInitEditMode() {\r\n\t\tthis.metricNames = ['min', 'max', 'avg', 'current', 'total', 'name', 'first', 'delta', 'diff', 'range'];\r\n\t\tthis.sortDirections = ['none', 'ascending', 'descending'];\r\n\t\tthis.aggregations = ['all', 'last', 'first', 'mean', 'max', 'min'];\r\n        this.fontSizes = ['20%', '30%', '50%', '70%', '80%', '100%', '110%', '120%', '150%', '170%', '200%', '250%', '300%', '350%', '400%'];\r\n\t\tthis.valuePositions = ['bar base', 'bar end', 'top'];\r\n        this.addEditorTab('Columns', 'public/plugins/michaeldmoore-multistat-panel/columns.html', 2);\r\n        this.addEditorTab('Layout', 'public/plugins/michaeldmoore-multistat-panel/layout.html', 3);\r\n        this.addEditorTab('Grouping', 'public/plugins/michaeldmoore-multistat-panel/grouping.html', 4);\r\n        this.addEditorTab('Options', 'public/plugins/michaeldmoore-multistat-panel/options.html', 5);\r\n        this.addEditorTab('Lines-and-Limits', 'public/plugins/michaeldmoore-multistat-panel/linesandlimits.html', 6);\r\n    }\r\n\r\n\r\n    onDataReceived(data) {\r\n\t\tthis.cols = [];\r\n\t\tif (data.length == 0){\r\n\t\t\tthis.elem.html(\"<div style='position:absolute;top:50%;text-align:center;font-size:0.875rem;'>No data to show</div>\");\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.rows = null;\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\telse if (data[0].type == \"table\"){\r\n\t\t\tthis.data = data[0];\r\n\r\n\t\t\tfor(let i=0; i < this.data.columns.length; i++)\r\n\t\t\t\tthis.cols[i] = this.data.columns[i].text;\r\n\t\t\tthis.cols0 = [''].concat(this.cols);\r\n\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\telse {\r\n          this.alertSrv.set('Non-Table type data received', 'Multistat does not support Time Series data sets', 'error', 5000);\r\n\t\t}\r\n    }\r\n\r\n\tbuildDateHtml(dateTimeCol){\r\n\t\tvar $title = this.elem.closest('.panel-container').find('.panel-title');\r\n\t\tvar $maxDate = $title.find('span.michaeldmoore-multistat-panel-maxDate');\r\n\r\n\t\tif($maxDate.length == 0)\r\n\t\t\t$maxDate = $title.append('<span class=\"michaeldmoore-multistat-panel-maxDate\"/>').children().last();\r\n\r\n\t\tif (dateTimeCol != -1 && this.panel.ShowDate) {\r\n\t\t\tvar maxDate = this.rows[0][dateTimeCol];\r\n\r\n\t\t\tfor(let i = 1; i < this.rows.length; i++){\r\n\t\t\t\tif (maxDate < this.rows[i][dateTimeCol])\r\n\t\t\t\t\tmaxDate = this.rows[i][dateTimeCol];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar dd = moment(maxDate).add(this.panel.TZOffsetHours, 'h');\r\n\t\t\t\r\n\t\t\tif (this.panel.DateFormat.toUpperCase() == 'ELAPSED')\r\n\t\t\t\t$maxDate.text(dd.fromNow()).show();\r\n\t\t\telse\r\n\t\t\t\t$maxDate.text(dd.format(this.panel.DateFormat)).show();\r\n\t\t}\r\n\t\telse\r\n\t\t\t$maxDate.hide();\t\t\t\r\n\t}\r\n\r\n\r\n    onRender() {\r\n\t\tif (this.data != null && this.data.rows != null) {\r\n\t\t\tvar cols = this.cols;\r\n\t\t\tvar dateTimeCol = -1;\r\n\t\t\tvar labelCol = -1;\r\n\t\t\tvar valueCol = 0;\r\n\t\t\tvar sortCol = 0;\r\n\t\t\tvar groupCol = -1;\r\n\t\t\tfor(let i = 0; i < cols.length; i++){\r\n\t\t\t\tif (cols[i] == this.panel.DateTimeColName)\r\n\t\t\t\t\tdateTimeCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.LabelColName)\r\n\t\t\t\t\tlabelCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.ValueColName)\r\n\t\t\t\t\tvalueCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.SortColName)\r\n\t\t\t\t\tsortCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.GroupColName)\r\n\t\t\t\t\tgroupCol = i;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.panel.LabelNameFilter.length > 0 && labelCol != -1)\r\n\t\t\t{\r\n\t\t\t\tvar regex = new RegExp(this.panel.LabelNameFilter, \"\");\r\n\t\t\t\tthis.matchingRows = [];\r\n\t\t\t\tfor(let i = 0; i < this.data.rows.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dd = this.data.rows[i];\r\n\t\t\t\t\tvar label = dd[labelCol];\r\n\t\t\t\t\tif (label.match(regex) != null)\r\n\t\t\t\t\t\tthis.matchingRows.push(dd);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.matchingRows = this.data.rows;\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t\tif (this.panel.Aggregate != 'all' && labelCol != -1){\r\n\t\t\t\tvar oo = [];\r\n\t\t\t\tthis.rows = [];\r\n\t\t\t\tswitch(this.panel.Aggregate) {\r\n\t\t\t\t\tcase 'first':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){return d[0];})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = oo;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'last':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){return d[d.length - 1];})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = oo;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'mean':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){\r\n\t\t\t\t\t\t\t\tvar dd = Object.values(Object.assign({}, d[d.length - 1]));\r\n\t\t\t\t\t\t\t\tdd[valueCol] = d3.mean(d, function(d) { return d[valueCol];});\r\n\t\t\t\t\t\t\t\treturn dd;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = Array.from(oo);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'max':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){\r\n\t\t\t\t\t\t\t\tvar dd = Object.values(Object.assign({}, d[d.length - 1]));\r\n\t\t\t\t\t\t\t\tdd[valueCol] = d3.max(d, function(d) { return d[valueCol];});\r\n\t\t\t\t\t\t\t\treturn dd;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = Array.from(oo);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'min':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){\r\n\t\t\t\t\t\t\t\tvar dd = Object.values(Object.assign({}, d[d.length - 1]));\r\n\t\t\t\t\t\t\t\tdd[valueCol] = d3.min(d, function(d) { return d[valueCol];});\r\n\t\t\t\t\t\t\t\treturn dd;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = Array.from(oo);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.rows = this.matchingRows;\r\n\t\t\t}\t\t\r\n\r\n\t\t\tthis.elem.html(\"<svg class='\" + this.className + \"'  style='height:\" + this.ctrl.height + \"px; width:100%'></svg>\");\r\n\t\t\tvar $container = this.elem.find('.' + this.className);\r\n\r\n\t\t\tvar h = $container.height();\r\n\t\t\tvar w = $container.width() - 15;\r\n\r\n\t\t\tif (this.panel.SortDirection != \"none\"){\r\n\t\t\t\tvar ascending = this.panel.SortDirection == \"ascending\";\r\n\t\t\t\tthis.rows.sort(function(x, y){\r\n\t\t\t\t\tvar comp = (x[sortCol] == y[sortCol]) ? 0 : ((x[sortCol] > y[sortCol]) ? 1 : -1);\r\n\t\t\t\t\treturn ascending ? comp : -comp;\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.buildDateHtml(dateTimeCol);\r\n\t\t\t\r\n\t\t\tvar horizontal = this.panel.Horizontal;\r\n\t\t\t\r\n\t\t\tvar labelMargin = ($.isNumeric(this.panel.LabelMargin) && this.panel.LabelMargin >= 0) ? this.panel.LabelMargin : null;\r\n\t\t\tvar lowSideMargin = this.panel.LowSideMargin >= 0 ? this.panel.LowSideMargin : 0;\r\n\t\t\tvar highSideMargin = this.panel.HighSideMargin >= 0 ? this.panel.HighSideMargin : 0;\r\n\r\n\t\t\tthis.svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.highflash\").interrupt();\r\n\t\t\tthis.svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.lowflash\").interrupt();\r\n\r\n\t\t\tthis.svg = d3.select('.' + this.className).append('svg');\t\r\n\t\t\t\r\n\t\t\tvar id = this.panel.id;\r\n\t\t\tvar barPadding = this.panel.BarPadding;\r\n\t\t\tvar baseLineValue = this.panel.BaseLineValue;\r\n\t\t\tvar minLineValue = this.panel.MinLineValue;\r\n\t\t\tvar maxLineValue = this.panel.MaxLineValue;\r\n\t\t\tvar highBarColor = this.panel.HighBarColor;\r\n\t\t\tvar lowBarColor = this.panel.LowBarColor;\r\n\t\t\tvar highLimitValue = this.panel.HighLimitValue;\r\n\t\t\tvar HighLimitBarColor = this.panel.HighLimitBarColor;\r\n\t\t\tvar HighLimitBarFlashColor = this.panel.HighLimitBarFlashColor;\r\n\t\t\tvar HighLimitBarFlashTimeout = this.panel.HighLimitBarFlashTimeout;\r\n\t\t\tvar recolorHighLimitBar = this.panel.RecolorHighLimitBar;\r\n\t\t\tvar lowLimitValue = this.panel.LowLimitValue;\r\n\t\t\tvar LowLimitBarColor = this.panel.LowLimitBarColor;\r\n\t\t\tvar LowLimitBarFlashColor = this.panel.LowLimitBarFlashColor;\r\n\t\t\tvar LowLimitBarFlashTimeout = this.panel.LowLimitBarFlashTimeout;\r\n\t\t\tvar recolorLowLimitBar = this.panel.RecolorLowLimitBar;\r\n\t\t\tvar flashHighLimitBar = this.panel.FlashHighLimitBar;\r\n\t\t\tvar flashLowLimitBar = this.panel.FlashLowLimitBar;\r\n\t\t\tvar showTooltips = this.panel.ShowTooltips;\r\n\t\t\tvar DateTimeColName = this.panel.DateTimeColName;\r\n\t\t\tvar DateFormat = this.panel.DateFormat;\r\n\t\t\tvar TooltipDateFormat = this.panel.TooltipDateFormat;\r\n\t\t\tvar ValueColName = this.panel.ValueColName;\r\n\t\t\tvar ValueDecimals = this.panel.ValueDecimals;\r\n\t\t\tvar OddRowColor = this.panel.OddRowColor;\r\n\t\t\tvar EvenRowColor = this.panel.EvenRowColor;\r\n\t\t\tvar TZOffsetHours = this.panel.TZOffsetHours;\r\n\t\t\tvar GroupSortString = this.panel.GroupSortString;\r\n\t\t\tvar GroupCols = this.panel.GroupCols;\r\n\t\t\tvar GroupNameFilter = this.panel.GroupNameFilter;\r\n\t\t\tvar ScaleFactor = Number(this.panel.ScaleFactor);\r\n\t\t\tvar LabelColor = this.panel.LabelColor;\r\n\t\t\tvar OutOfRangeLabelColor = this.panel.OutOfRangeLabelColor;\r\n\t\t\tvar ValuePosition = this.panel.ValuePosition;\r\n\t\t\t\r\n\t\t\tvar minValue = d3.min(this.rows, function(d) { return Number(d[valueCol]) * ScaleFactor; });\r\n\t\t\tif ($.isNumeric(minLineValue) == false)\r\n\t\t\t\tminLineValue = minValue;\r\n\t\t\t\r\n\t\t\tvar maxValue = d3.max(this.rows, function(d) { return Number(d[valueCol]) * ScaleFactor; });\r\n\t\t\tif ($.isNumeric(maxLineValue) == false)\r\n\t\t\t\tmaxLineValue = maxValue;\t\t\t\t\r\n\t\t\t\r\n\t\t\tif ($.isNumeric(baseLineValue) == false)\r\n\t\t\t\tbaseLineValue = 0;\r\n\t\t\t\r\n\t\t\tif (minLineValue > baseLineValue)\r\n\t\t\t\tminLineValue = baseLineValue;\r\n\t\t\t\r\n\t\t\tif ($.isNumeric(lowLimitValue) && minLineValue > lowLimitValue)\r\n\t\t\t\tminLineValue = lowLimitValue;\r\n\t\t\t\r\n\t\t\tif (maxLineValue < baseLineValue)\r\n\t\t\t\tmaxLineValue = baseLineValue;\r\n\t\t\t\r\n\t\t\tif ($.isNumeric(highLimitValue) && maxLineValue < highLimitValue)\r\n\t\t\t\tmaxLineValue = highLimitValue;\r\n\r\n\t\t\td3.select(\"body\").append(\"div\")\r\n\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-tooltip michaeldmoore-multistat-panel-tooltip-\" + id)\r\n\t\t\t\t.style(\"opacity\", 0);\r\n\t\t\t\r\n\t\t\tvar tooltipShow = function(d, c, id){\r\n\t\t\t\tvar tooltipDiv = d3.select(\".michaeldmoore-multistat-panel-tooltip-\" + id);\r\n\t\t\t\ttooltipDiv.transition()\r\n\t\t\t\t.duration(200)\r\n\t\t\t\t.style(\"opacity\", 0.9);\r\n\t\t\t\tvar html = \"<table>\";\r\n\t\t\t\tfor (i = 0; i < d.length; i++){\r\n\t\t\t\t\tvar cc = c[i];\r\n\t\t\t\t\tvar dd = d[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (cc == DateTimeColName)\r\n\t\t\t\t\t\tdd = moment(dd).add(TZOffsetHours, 'h').format(TooltipDateFormat);\r\n\t\t\t\t\telse if (cc == ValueColName && $.isNumeric(dd))\r\n\t\t\t\t\t\tdd = Number(dd).toFixed(ValueDecimals);\r\n\t\t\t\t\t\r\n\t\t\t\t\thtml += \"<tr><td>\" + cc + \"</td><td>\" + dd + \"</td></tr>\";\r\n\t\t\t\t}\r\n\t\t\t\thtml += \"</table>\";\r\n\t\t\t\ttooltipDiv.html(html)\r\n\t\t\t\t.style(\"left\", d3.event.pageX + \"px\")\r\n\t\t\t\t.style(\"top\", (d3.event.pageY - 28) + \"px\");\r\n\t\t\t};\r\n\r\n\t\t\tvar tooltipHide = function(id) {\r\n\t\t\t\tvar tooltipDiv = d3.selectAll(\".michaeldmoore-multistat-panel-tooltip-\" + id);\r\n\t\t\t\ttooltipDiv.transition()\t\t\r\n\t\t\t\t.duration(500)\t\t\r\n\t\t\t\t.style(\"opacity\", 0);\t\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar scaleAndClipValue = function(d) {\r\n\t\t\t\tvar val = d * ScaleFactor;\r\n\t\t\t\tif (val > maxLineValue)\r\n\t\t\t\t\tval = maxLineValue;\r\n\t\t\t\tif (val < minLineValue)\r\n\t\t\t\t\tval = minLineValue;\r\n\t\t\t\t\r\n\t\t\t\treturn val;\r\n\t\t\t};\r\n\r\n\t\t\tif(horizontal) {\r\n\t\t\t\tvar plotGroupHorizontal = function(panel, svg, data, numRows, groupName, groupNameOffset, left, w, hh, dh) {\r\n\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"yellow\");*/\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Add Above-High Side Group Names\r\n\t\t\t\t\tif(groupName != '' && panel.ShowGroupLabels) {\r\n\t\t\t\t\t\tsvg\r\n\t\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t\t.text(groupName)\r\n\t\t\t\t\t\t\t.attr(\"x\", left + (labelMargin + w)/2)\r\n\t\t\t\t\t\t\t.attr(\"y\", hh + groupNameOffset/2)\r\n\t\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t\t.attr(\"font-size\", panel.GroupLabelFontSize)\r\n\t\t\t\t\t\t\t.attr(\"fill\", panel.GroupLabelColor)\r\n\t\t\t\t\t\t\t.attr(\"background\", \"blue\")\r\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thh += groupNameOffset;\r\n\t\t\t\t\tdh -= groupNameOffset;\r\n\t\t\t\t\tw -= 10;\r\n\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"white\");*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tvar labels = data.map(function(d){ return d[labelCol]; });\r\n\t\t\t\t\twhile (labels.length < numRows)\r\n\t\t\t\t\t\tlabels = labels.concat('_' + Math.random().toString(36).substr(2, 9));\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tvar labelScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(labels)\r\n\t\t\t\t\t\t\t\t.rangeRound([hh + highSideMargin, hh + dh - lowSideMargin])\r\n\t\t\t\t\t\t\t\t.padding(barPadding / 100);\r\n\t\t\t\t\r\n\t\t\t\t\tvar stripedata = data.concat(d3.range(data.length, numRows));\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar stripeScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(stripedata)\r\n\t\t\t\t\t\t\t\t.rangeRound([hh + highSideMargin, hh + dh - lowSideMargin])\r\n\t\t\t\t\t\t\t\t.padding(barPadding / 100);\r\n\t\t\t\t\r\n\t\t\t\t\t// Draw background of alternating stripes \r\n\t\t\t\t\tvar oddeven = false;\r\n\t\t\t\t\tsvg.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t\t\t.data(stripedata)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-row\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", labelScale.bandwidth())\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", function(d){return stripeScale(d);})\r\n\t\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\t\t\toddeven = !oddeven;\r\n\t\t\t\t\t\t\t\treturn oddeven ? OddRowColor : EvenRowColor;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d, i) {\r\n\t\t\t\t\t\t\tif (showTooltips && i < data.length)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar gg = svg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t\t\t.data(data)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"g\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (panel.ShowValues && panel.ValuePosition == \"top\") {\r\n\t\t\t\t\t\tvar maxValueWidth = 0;\r\n\t\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t\t.attr(\"x\", left + w)\r\n\t\t\t\t\t\t.attr(\"y\", function(d,i){return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);})\r\n\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t\t.attr(\"text-anchor\", \"end\")\r\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\")\r\n\t\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\t\tvar thisWidth = this.getComputedTextLength();\r\n\t\t\t\t\t\t\tmaxValueWidth = d3.max([maxValueWidth, thisWidth]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tw -= maxValueWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (panel.ShowLabels) {\r\n\t\t\t\t\t\tvar maxLabelWidth = 0;\r\n\t\t\t\t\t\tvar labelAngle = panel.LableAngle; \r\n\t\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t\t.text(function(d) { return d[labelCol]; })\r\n\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t.attr(\"font-size\", panel.LabelFontSize)\r\n\t\t\t\t\t\t.attr(\"fill\", function(d,i){return d[valueCol] * ScaleFactor > maxLineValue || d[valueCol] * ScaleFactor < minLineValue ? panel.OutOfRangeLabelColor : panel.LabelColor; })\r\n\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t\t//.attr(\"text-anchor\", \"start\")\r\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\")\r\n\t\t\t\t\t\t.attr(\"transform\", function(d, i) { \r\n\t\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar y =  labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);\r\n\t\t\t\t\t\t\tvar x = left + a/2;\r\n\t\t\t\t\t\t\treturn \"translate(\"+x+\",\"+y+\") rotate(\"+labelAngle+\")\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\r\n\t\t\t\t\t\t\tvar thisWidth = a;\r\n\t\t\t\t\t\t\tmaxLabelWidth = d3.max([maxLabelWidth, thisWidth]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ($.isNumeric(labelMargin)){\r\n\t\t\t\t\t\t\tleft += labelMargin;\r\n\t\t\t\t\t\t\tw -= labelMargin;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tleft += maxLabelWidth;\r\n\t\t\t\t\t\t\tw -= maxLabelWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar valueScale = d3.scaleLinear()\r\n\t\t\t\t\t\t.domain([minLineValue, maxLineValue])\r\n\t\t\t\t\t\t.range([left + labelMargin, left + w])\r\n\t\t\t\t\t\t.nice();\r\n\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tfunction vLine(svg, value, color) {\t\r\n\t\t\t\t\t\tsvg.append(\"line\")\r\n\t\t\t\t\t\t\t.style(\"stroke\", color)\r\n\t\t\t\t\t\t\t.attr(\"y1\", hh + highSideMargin)\r\n\t\t\t\t\t\t\t.attr(\"x1\", valueScale(value))\r\n\t\t\t\t\t\t\t.attr(\"y2\", hh + dh - lowSideMargin)\r\n\t\t\t\t\t\t\t.attr(\"x2\", valueScale(value));\r\n\t\t\t\t\t}\t\t\t\r\n\r\n\t\t\t\t\tif(panel.ShowBaseLine)\r\n\t\t\t\t\t\tvLine(svg, baseLineValue, panel.BaseLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowMaxLine)\r\n\t\t\t\t\t\tvLine(svg, maxLineValue, panel.MaxLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowMinLine)\r\n\t\t\t\t\t\tvLine(svg, minLineValue, panel.MinLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowHighLimitLine)\r\n\t\t\t\t\t\tvLine(svg, highLimitValue, panel.HighLimitLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowLowLimitLine)\r\n\t\t\t\t\t\tvLine(svg, lowLimitValue, panel.LowLimitLineColor);\r\n\r\n\t\t\t\t\tsvg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t\t\t.data(data)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-bar\")\r\n\t\t\t\t\t\t.attr(\"width\", function(d) {\r\n\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\treturn Math.abs(valueScale(val) - valueScale(baseLineValue));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"height\", labelScale.bandwidth())\r\n\t\t\t\t\t\t.attr(\"x\", function(d) { \r\n\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\treturn d3.min([valueScale(val), valueScale(baseLineValue)]); \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"y\", function(d,i){return labelScale(d[labelCol]);})\r\n\t\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\t\tif (recolorHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue))\r\n\t\t\t\t\t\t\t\treturn HighLimitBarColor;\r\n\t\t\t\t\t\t\tif (recolorLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue))\r\n\t\t\t\t\t\t\t\treturn LowLimitBarColor;\r\n\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? highBarColor : lowBarColor;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.classed(\"highflash\", function(d) { \r\n\t\t\t\t\t\t\treturn recolorHighLimitBar && flashHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.classed(\"lowflash\", function(d) { \r\n\t\t\t\t\t\t\treturn recolorLowLimitBar && flashLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvar g = svg\r\n\t\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t\t\t\t.data(data)\r\n\t\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t\t.append(\"g\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (panel.ShowValues && panel.ValuePosition != \"top\") {\r\n\t\t\t\t\t\tg.append(\"text\")\r\n\t\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t\t.attr(\"x\", function(d){\r\n\t\t\t\t\t\t\tif (panel.ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\t\treturn valueScale(baseLineValue);// + 5;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\t\treturn valueScale(val) + ((val > baseLineValue)); // ? - 5 : + 5)\r\n\t\t\t\t\t\t\t}})\r\n\t\t\t\t\t\t.attr(\"y\", function(d,i){return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);})\r\n\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t\t.attr(\"text-anchor\", function(d){\r\n\t\t\t\t\t\t\tif (panel.ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"start\" : \"end\";\r\n\t\t\t\t\t\t\t\t//return \"start\";\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"end\" : \"start\";\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Add High Side Value Axis (X)\r\n\t\t\t\t\tif (highSideMargin > 0) {\r\n\t\t\t\t\t\tvar ggHighSide = svg\r\n\t\t\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t\t\t.attr(\"transform\", 'translate(1,' + (hh + highSideMargin) + ')')\r\n\t\t\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-valueaxis\")\r\n\t\t\t\t\t\t\t\t.call(d3.axisTop(valueScale));\r\n\t\t\t\t\t\tggHighSide.selectAll('.tick text').attr('fill', panel.HighAxisColor);\r\n\t\t\t\t\t\tggHighSide.selectAll('.tick line').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t\t\tggHighSide.selectAll('path.domain').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Add Low Side Value Axis (X)\r\n\t\t\t\t\tif (lowSideMargin > 0) {\t\r\n\t\t\t\t\t\tvar ggLowSide = svg\r\n\t\t\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t\t\t.attr(\"transform\", 'translate(0,' + (hh + dh - lowSideMargin) + ')')\r\n\t\t\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-valueaxis\")\r\n\t\t\t\t\t\t\t\t.call(d3.axisBottom(valueScale));\r\n\t\t\t\t\t\tggLowSide.selectAll('.tick text').attr('fill', panel.LowAxisColor);\r\n\t\t\t\t\t\tggLowSide.selectAll('.tick line').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t\t\tggLowSide.selectAll('path.domain').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar groupNameOffset = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (this.panel.ShowGroupLabels)\r\n\t\t\t\t\tgroupNameOffset = Number(this.panel.GroupLabelFontSize.replace('%','')) * 0.15;\r\n\r\n\t\t\t\tif (groupCol >= 0){\r\n\t\t\t\t\tthis.groupedRows = d3.nest()\r\n\t\t\t\t\t\t.key(function(d){return d[groupCol];})\r\n\t\t\t\t\t\t.entries(this.rows);\r\n\r\n\t\t\t\t\tif (GroupNameFilter.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar regexGroupNameFilter = new RegExp(GroupNameFilter, \"\");\r\n\t\t\t\t\t\tvar matchingGroups = [];\r\n\t\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar groupName = this.groupedRows[i].key;\r\n\t\t\t\t\t\t\tif (groupName.match(regexGroupNameFilter) != null)\r\n\t\t\t\t\t\t\t\tmatchingGroups.push(this.groupedRows[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.groupedRows = matchingGroups;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tthis.groupedRows.sort(\r\n\t\t\t\t\t\tfunction(a,b){\r\n\t\t\t\t\t\t\tvar aPos = GroupSortString.search(a.key);\r\n\t\t\t\t\t\t\tvar bPos = GroupSortString.search(b.key);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (aPos == bPos)\r\n\t\t\t\t\t\t\t\treturn a.key.localeCompare(b.key);\r\n\t\t\t\t\t\t\telse if (aPos == -1)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\telse if (bPos == -1)\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn aPos - bPos;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar gap = 5;\t\r\n\t\t\t\t\tvar gcols = (GroupCols <= 0 || GroupCols > this.groupedRows.length) ? this.groupedRows.length : GroupCols;\r\n\t\t\t\t\tvar dw = ((w + gap) / gcols);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// figure out the max data points in each row of groups...\r\n\t\t\t\t\tvar pointsPerRow = [];\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length/gcols; i++)\r\n\t\t\t\t\t\tpointsPerRow.push(0);\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet rr = Math.floor(i / gcols);\r\n\t\t\t\t\t\tlet u = this.groupedRows[i].values.length;\r\n\t\t\t\t\t\tif (pointsPerRow[rr] < u)\r\n\t\t\t\t\t\t\tpointsPerRow[rr] = u;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar totalPoints = 0;\r\n\t\t\t\t\tfor(let i = 0; i < pointsPerRow.length; i++)\r\n\t\t\t\t\t\ttotalPoints += pointsPerRow[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar rowOverheadHeight = groupNameOffset + this.panel.LowSideMargin + this.panel.HighSideMargin;\r\n\t\t\t\t\tvar rowHeight = (h - (pointsPerRow.length * rowOverheadHeight)) / totalPoints;\t\t\t\t\t\r\n\r\n\t\t\t\t\tvar numRows = Math.ceil(this.groupedRows.length / gcols);\r\n\t\t\t\t\tvar hh = 0;\r\n\t\t\t\t\tfor (var rr = 0; rr < numRows; rr++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar nn = pointsPerRow[rr];\r\n\t\t\t\t\t\tvar dh = rowOverheadHeight + (nn * rowHeight);\r\n\t\t\t\t\t\thh += dh;\r\n\t\t\t\t\t\tfor (var cc = 0; cc < gcols; cc++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar ii = cc + (rr * gcols);\r\n\t\t\t\t\t\t\tif (ii < this.groupedRows.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tplotGroupHorizontal(this.panel, this.svg, this.groupedRows[ii].values, nn, this.groupedRows[ii].key, groupNameOffset, cc * dw, dw - gap, hh - dh, dh);\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.groupedRows = null;\r\n\r\n\t\t\t\t\tplotGroupHorizontal(this.panel, this.svg, this.rows, this.rows.length, '', 0, 0, w, 0, h);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar plotGroupVertical = function(panel, svg, data, numRows, groupName, groupNameOffset, left, w, hh, dh) {\r\n\r\n\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"yellow\");*/\r\n\r\n\t\t\t\t\t// Add Above-High Side Group Names\r\n\t\t\t\t\tif(groupName != '' && panel.ShowGroupLabels) {\r\n\t\t\t\t\t\tsvg\r\n\t\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t\t.text(groupName)\r\n\t\t\t\t\t\t\t.attr(\"x\", left + (labelMargin + w)/2)\r\n\t\t\t\t\t\t\t.attr(\"y\", hh + groupNameOffset/2)\r\n\t\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t\t.attr(\"font-size\", panel.GroupLabelFontSize)\r\n\t\t\t\t\t\t\t.attr(\"fill\", panel.GroupLabelColor)\r\n\t\t\t\t\t\t\t.attr(\"background\", \"blue\")\r\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\thh += groupNameOffset;\r\n\t\t\t\t\tdh -= groupNameOffset;\r\n\t\t\t\t\tw -= 10;\r\n\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"white\");*/\r\n\r\n\r\n\t\t\t\t\tvar labels = data.map(function(d){ return d[labelCol]; });\r\n\t\t\t\t\twhile (labels.length < numRows)\r\n\t\t\t\t\t\tlabels = labels.concat('_' + Math.random().toString(36).substr(2, 9));\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tvar labelScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(labels)\r\n\t\t\t\t\t\t\t\t.range([left + lowSideMargin, left + w - highSideMargin])\r\n\t\t\t\t\t\t\t\t.padding(barPadding / 100);\r\n\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tvar stripedata = data.concat(d3.range(data.length, numRows));\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar stripeScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(stripedata)\r\n\t\t\t\t\t\t\t\t.range([left + lowSideMargin, left + w - highSideMargin])\r\n\t\t\t\t\t\t\t\t.padding(barPadding / 100);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// Draw background of alternating stripes \r\n\t\t\t\t\tvar oddeven = false;\r\n\t\t\t\t\tsvg.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t\t\t.data(stripedata)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-row\")\r\n\t\t\t\t\t\t.attr(\"width\", labelScale.bandwidth())\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", function(d,i){return stripeScale(d);})\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\t\t\toddeven = !oddeven;\r\n\t\t\t\t\t\t\t\treturn oddeven ? OddRowColor : EvenRowColor;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d, i) {\r\n\t\t\t\t\t\t\tif (showTooltips && i < data.length)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\tvar gg = svg\r\n\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t\t.data(data)\r\n\t\t\t\t\t.enter()\r\n\t\t\t\t\t.append(\"g\");\r\n\t\t\t\t\t\r\n\t\t\t\tif (panel.ShowValues && panel.ValuePosition == \"top\") {\r\n\t\t\t\t\tvar maxValueHeight = 0;\r\n\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t.attr(\"x\", function(d, i) { return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2); })\r\n\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.attr(\"dominant-baseline\", \"text-before-edge\")\r\n\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\tvar thisHeight = this.getBBox().height;\r\n\t\t\t\t\t\tmaxValueHeight = d3.max([maxValueHeight, thisHeight]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thh += maxValueHeight;\r\n\t\t\t\t\tdh -= maxValueHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (panel.ShowLabels) {\r\n\t\t\t\t\tvar maxLabelHeight = 0;\r\n\t\t\t\t\tvar labelAngle = panel.LableAngle; \r\n\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t.text(function(d) { return d[labelCol]; })\r\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t.attr(\"font-size\", panel.LabelFontSize)\r\n\t\t\t\t\t.attr(\"fill\", function(d,i){return d[valueCol] * ScaleFactor > maxLineValue || d[valueCol] * ScaleFactor < minLineValue ? OutOfRangeLabelColor : LabelColor; })\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.attr(\"dominant-baseline\", \"central\")\r\n\t\t\t\t\t.attr(\"transform\", function(d, i) { \r\n\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar x =  labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);\r\n\t\t\t\t\t\tvar y = hh + dh - b/2;\r\n\t\t\t\t\t\treturn \"translate(\"+x+\",\"+y+\") rotate(\"+labelAngle+\")\";\r\n\t\t\t\t\t})\t\t\t\t\t\r\n\t\t\t\t\t.on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\r\n\t\t\t\t\t\tvar thisHeight = b;\r\n\t\t\t\t\t\tmaxLabelHeight = d3.max([maxLabelHeight, thisHeight]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif ($.isNumeric(labelMargin)){\r\n\t\t\t\t\t\tdh -= labelMargin;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tdh -= maxLabelHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar valueScale = d3.scaleLinear()\r\n\t\t\t\t\t.domain([maxLineValue, minLineValue])\r\n\t\t\t\t\t.range([hh, hh + dh])\r\n\t\t\t\t\t.nice();\r\n\t\t\t\t\r\n\t\t\t\tfunction hLine(svg, value, color) {\t\r\n\t\t\t\t\tsvg.append(\"line\")\r\n\t\t\t\t\t\t.style(\"stroke\", color)\r\n\t\t\t\t\t\t.attr(\"x1\", left + lowSideMargin)\r\n\t\t\t\t\t\t.attr(\"y1\", valueScale(value))\r\n\t\t\t\t\t\t.attr(\"x2\", left + w - highSideMargin)\r\n\t\t\t\t\t\t.attr(\"y2\", valueScale(value));\r\n\t\t\t\t}\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\t\tif(panel.ShowBaseLine)\r\n\t\t\t\t\thLine(svg, baseLineValue, panel.BaseLineColor);\r\n\r\n\t\t\t\tif(panel.ShowMaxLine)\r\n\t\t\t\t\thLine(svg, maxLineValue, panel.MaxLineColor);\r\n\r\n\t\t\t\tif(panel.ShowMinLine)\r\n\t\t\t\t\thLine(svg, minLineValue, panel.MinLineColor);\r\n\r\n\t\t\t\tif(panel.ShowHighLimitLine)\r\n\t\t\t\t\thLine(svg, highLimitValue, panel.HighLimitLineColor);\r\n\r\n\t\t\t\tif(panel.ShowLowLimitLine)\r\n\t\t\t\t\thLine(svg, lowLimitValue, panel.LowLimitLineColor);\r\n\r\n\t\t\t\tgg.append(\"rect\")\t\r\n\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-bar\")\r\n\t\t\t\t\t.attr(\"height\", function(d) { \r\n\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\treturn Math.abs(valueScale(baseLineValue) - valueScale(val));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"width\", labelScale.bandwidth())\r\n\t\t\t\t\t.attr(\"y\", function(d) { \r\n\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\treturn d3.min([valueScale(val), valueScale(baseLineValue)]); \r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"x\", function(d, i) { return labelScale(d[labelCol]);})\r\n\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\tif (recolorHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue))\r\n\t\t\t\t\t\t\treturn HighLimitBarColor;\r\n\t\t\t\t\t\tif (recolorLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue))\r\n\t\t\t\t\t\t\treturn LowLimitBarColor;\r\n\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? highBarColor : lowBarColor;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.classed(\"highflash\", function(d) { \r\n\t\t\t\t\t\treturn recolorHighLimitBar && flashHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.classed(\"lowflash\", function(d) { \r\n\t\t\t\t\t\treturn recolorLowLimitBar && flashLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t    .on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\tif (panel.ShowValues && panel.ValuePosition != \"top\") {\r\n\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t.attr(\"x\", function(d, i) { return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2); })\r\n\t\t\t\t\t.attr(\"y\", function(d){\r\n\t\t\t\t\t\tif (ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\treturn valueScale(baseLineValue);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\treturn valueScale(val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.attr(\"dominant-baseline\", function(d){\r\n\t\t\t\t\t\tif (ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"text-after-edge\" : \"text-before-edge\";\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"text-before-edge\" : \"text-after-edge\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (lowSideMargin > 0) {\t\r\n\t\t\t\t\tlet gg = svg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.attr('transform', 'translate(' + (left + lowSideMargin) + ', 0)')\r\n\t\t\t\t\t\t.classed('michaeldmoore-multistat-panel-valueaxis', true)\r\n\t\t\t\t\t\t.call(d3.axisLeft(valueScale).tickSizeInner(5).tickSizeOuter(10).ticks(5));\r\n\t\t\t\t\tgg.selectAll('.tick text').attr('fill', panel.LowAxisColor);\r\n\t\t\t\t\tgg.selectAll('.tick line').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t\tgg.selectAll('path.domain').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (highSideMargin > 0) {\t\r\n\t\t\t\t\tlet gg = svg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.attr('transform', 'translate(' + (left + w - highSideMargin) + ', 0)')\r\n\t\t\t\t\t\t.classed('michaeldmoore-multistat-panel-valueaxis', true)\r\n\t\t\t\t\t\t.call(d3.axisRight(valueScale).tickSizeInner(5).tickSizeOuter(10).ticks(5));\r\n\t\t\t\t  gg.selectAll('.tick text').attr('fill', panel.HighAxisColor);\r\n\t\t\t\t\tgg.selectAll('.tick line').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t\tgg.selectAll('path.domain').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tlet groupNameOffset = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (this.panel.ShowGroupLabels)\r\n\t\t\t\t\tgroupNameOffset = Number(this.panel.GroupLabelFontSize.replace('%','')) * 0.15;\r\n\r\n\t\t\t\tif (groupCol >= 0){\r\n\t\t\t\t\tthis.groupedRows = d3.nest()\r\n\t\t\t\t\t\t.key(function(d){return d[groupCol];})\r\n\t\t\t\t\t\t.entries(this.rows);\r\n\r\n\t\t\t\t\tif (GroupNameFilter.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar regexGroupRows = new RegExp(GroupNameFilter, \"\");\r\n\t\t\t\t\t\tlet matchingGroups = [];\r\n\t\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet groupName = this.groupedRows[i].key;\r\n\t\t\t\t\t\t\tif (groupName.match(regexGroupRows) != null)\r\n\t\t\t\t\t\t\t\tmatchingGroups.push(this.groupedRows[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.groupedRows = matchingGroups;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tthis.groupedRows.sort(\r\n\t\t\t\t\t\tfunction(a,b){\r\n\t\t\t\t\t\t\tvar aPos = GroupSortString.search(a.key);\r\n\t\t\t\t\t\t\tvar bPos = GroupSortString.search(b.key);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (aPos == bPos)\r\n\t\t\t\t\t\t\t\treturn a.key.localeCompare(b.key);\r\n\t\t\t\t\t\t\telse if (aPos == -1)\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\telse if (bPos == -1)\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn aPos - bPos;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet gap = 5;\r\n\t\t\t\t\tlet gcols = (GroupCols <= 0 || GroupCols > this.groupedRows.length) ? this.groupedRows.length : GroupCols;\r\n\t\t\t\t\tlet dw = ((w + gap) / gcols);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// figure out the max data points in each column of groups...\r\n\t\t\t\t\tvar pointsPerCol = [];\r\n\t\t\t\t\tfor(let i = 0; i < gcols; i++)\r\n\t\t\t\t\t\tpointsPerCol.push(0);\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet cc = i % gcols;\r\n\t\t\t\t\t\tlet u = this.groupedRows[i].values.length;\r\n\t\t\t\t\t\tif (pointsPerCol[cc] < u)\r\n\t\t\t\t\t\t\tpointsPerCol[cc] = u;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet totalPoints = 0;\r\n\t\t\t\t\tfor(let i = 0; i < pointsPerCol.length; i++)\r\n\t\t\t\t\t\ttotalPoints += pointsPerCol[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar colOverheadWidth = this.panel.LowSideMargin + this.panel.HighSideMargin;\r\n\t\t\t\t\tvar colWidth = (w - (pointsPerCol.length * colOverheadWidth)) / totalPoints;\t\t\t\t\t\r\n\r\n\t\t\t\t\tlet numRows = Math.ceil(this.groupedRows.length / gcols);\r\n\t\t\t\t\tlet dh = h / numRows;\r\n\t\t\t\t\tlet hh = dh;\r\n\t\t\t\t\tfor (let rr = 0; rr < numRows; rr++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar ww = 0;\r\n\t\t\t\t\t\tfor (let cc = 0; cc < gcols; cc++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet nn = pointsPerCol[cc];\r\n\t\t\t\t\t\t\tlet dw = colOverheadWidth + (nn * colWidth);\r\n\r\n\t\t\t\t\t\t\tlet ii = cc + (rr * gcols);\r\n\t\t\t\t\t\t\tif (ii < this.groupedRows.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tplotGroupVertical(this.panel, this.svg, this.groupedRows[ii].values, nn, this.groupedRows[ii].key, \r\n\t\t\t\t\t\t\t\t\tgroupNameOffset, ww, dw - gap, hh - dh, dh);\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tww += dw;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thh += dh;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.groupedRows = null;\r\n\r\n\t\t\t\t\tplotGroupVertical(this.panel, this.svg, this.rows, this.rows.length, '', 0, 0, w, 0, h);\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\t\t\tvar pulseHigh = function(svg) {\r\n\t\t\t\tvar highFlashRects = svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.highflash\");\r\n\t\t\t\t\r\n\t\t\t\tif ($.isNumeric(HighLimitBarFlashTimeout) && highFlashRects._groups.length > 0 && highFlashRects._groups[0].length > 0) {\r\n\t\t\t\t\thighFlashRects\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.on(\"start\", function highRepeat() {\r\n\t\t\t\t\t\td3.active(this)\r\n\t\t\t\t\t\t\t.style(\"fill\", HighLimitBarFlashColor)\r\n\t\t\t\t\t\t\t.duration(HighLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.style(\"fill\", HighLimitBarColor)\r\n\t\t\t\t\t\t\t.duration(HighLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.on(\"start\", highRepeat);\r\n\t\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar pulseLow = function(svg) {\r\n\t\t\t\tvar lowFlashRects = svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.lowflash\");\r\n\t\t\t\tif ($.isNumeric(LowLimitBarFlashTimeout) && lowFlashRects._groups.length > 0 && lowFlashRects._groups[0].length > 0) {\r\n\t\t\t\t\tlowFlashRects\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.on(\"start\", function lowRepeat() {\r\n\t\t\t\t\t\td3.active(this)\r\n\t\t\t\t\t\t\t.style(\"fill\", LowLimitBarFlashColor)\r\n\t\t\t\t\t\t\t.duration(LowLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.style(\"fill\", LowLimitBarColor)\r\n\t\t\t\t\t\t\t.duration(LowLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.on(\"start\", lowRepeat);\r\n\t\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\r\n\t\t\tpulseHigh(this.svg);\r\n\t\t\tpulseLow(this.svg);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.elem.html(\"<div style='position:absolute;top:50%;text-align:center;font-size:0.875rem;'>No data to show!!</div>\");\r\n\r\n\t\t\t\t\t\t\r\n        this.ctrl.renderingCompleted();\r\n    }\r\n\r\n    onConfigChanged() {\r\n        this.refresh();\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl) {\r\n        this.ctrl = ctrl;\r\n        this.elem = elem.find('.panel-content');\r\n    }\r\n}\r\n\r\nMultistatPanelCtrl.templateUrl = 'module.html';\r\n\r\nexport { MultistatPanelCtrl as PanelCtrl };\r\n\r\n"]}